from django.contrib import admin
from django.urls import path
from django.contrib.auth import logout
from django.http import HttpResponseRedirect
from django.urls import reverse

class CustomAdminSite(admin.AdminSite):
    def get_urls(self):
        # Include default admin URLs
        urls = super().get_urls()
        # Add custom logout URL
        custom_urls = [
            path('logout/', self.admin_logout, name='admin_logout'),
        ]
        return custom_urls + urls
    
    def admin_logout(self, request):
        logout(request)
        return HttpResponseRedirect('/custom-logout/')  # Redirect to your custom logout page
    
    def get_login_redirect_url(self, request):
        return reverse('home')

# Register the custom admin site
custom_admin_site = CustomAdminSite(name='custom_admin')
