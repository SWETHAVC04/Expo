import django
import os
from bson import ObjectId
from exploits.models import Exploit  # Replace with your actual model

# Set up Django environment
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "exploit_db.settings")
django.setup()

# Fix corrupt exploit records
corrupt_exploits = Exploit.objects.filter(id=None)

for exploit in corrupt_exploits:
    exploit.id = ObjectId()  # Assign a new ObjectId
    exploit.save()

print("Fixed all missing _id fields!")
